page {
  height: 100vh; /* 页面高度占满整个视口高度 */
  background: radial-gradient(circle at 0% 0%, #f97373 0, #22010a 40%) fixed; /* 左上角辐射的红色渐变背景，营造喜庆氛围 */
  background-color: #22010a; /* 渐变之外的整体背景基色，深红偏棕色 */
  color: #e5e7eb; /* 页面默认文字颜色为浅灰，保证在深色背景上可读 */
}

.page {
  height: 100%; /* 让根容器在 page 内占满剩余高度 */
  display: flex; /* 使用弹性布局方便垂直方向排版 */
  flex-direction: column; /* 垂直从上到下依次排列子元素 */
  box-sizing: border-box; /* 让 padding 计入整体宽高，避免布局溢出 */
}

.header {
  padding: 100rpx 32rpx 0rpx 32rpx; /* 上 32 → 右 32 → 下 40 → 左 32 */
}

.header-title-row {
  display: flex; /* 标题行使用水平弹性布局 */
  align-items: baseline; /* 标题文字与 Beta 徽标按文字基线对齐 */
}

.title {
  font-size: 60rpx; /* 标题字号偏大，增强主标题存在感 */
  font-weight: 600; /* 半粗体，让标题更有力量感 */
  letter-spacing: 4rpx; /* 字间距稍大，营造科技/仪式感 */
}

.title-badge {
  margin-left: 12rpx; /* 徽标与标题之间留出一点水平空隙 */
  padding: 2rpx 12rpx; /* 徽标内部上下左右间距，形成胶囊形状 */
  border-radius: 999rpx; /* 极大圆角，做成圆角胶囊效果 */
  font-size: 20rpx; /* 徽标文字略小，不抢主标题注意力 */
  color: #fed7aa; /* 徽标文字为偏金色，突出“标签感” */
  border: 1rpx solid rgba(248, 171, 119, 0.9); /* 金色边框，强化 Beta 徽标视觉边界 */
}

.subtitle {
  margin-top: 8rpx; /* 副标题与标题之间的垂直间距 */
  font-size: 24rpx; /* 副标题字号适中，便于阅读统计信息 */
  color: #9ca3af; /* 中性灰色，让副标题信息弱化一点 */
}

/** 祈福带滚动区域背景设为纯白，便于定位滚动区域并突出卡片 */
.wall-scroll {
  flex: 1; /* 在垂直方向上占据 header 下方的剩余空间 */
  margin-top: 24rpx; /* 与上方标题区域保持一定间距 */
  margin-bottom: 24rpx; /* 下方间距 24rpx */
  /* background-color: #000000; */
  overflow: hidden; /* 超出容器范围的内容隐藏，用于制作“弹幕屏幕”效果 */
  position: relative; /* 作为绝对定位弹幕卡片的定位参考容器 */
  -webkit-mask-image: linear-gradient(
    to right,
    transparent 0%,
    #000 10%,
    #000 90%,
    transparent 100%
  );
  mask-image: linear-gradient(
    to right,
    transparent 0%,
    #000 10%,
    #000 90%,
    transparent 100%
  );
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
}

.blessing-card {
  padding: 0rpx 20rpx 0rpx 20rpx; /* 上 0 下 0，修正视觉重心 */
  border-radius: 20rpx; /* 更大的圆角，让卡片整体更像一条弹幕条 */
  overflow: hidden; /* 超出卡片边界的光效或内容隐藏，保持卡片干净 */
  white-space: nowrap; /* 强制文字不换行，防止在绝对定位时被挤压成竖排 */
}

/** 单条弹幕卡片：继承祈福卡片样式，增加绝对定位与横向动画 */
.danmaku-card {
  position: absolute; /* 相对 wall-scroll 进行绝对定位 */
  left: 100%; /* 初始位置固定在屏幕右侧边缘外，确保从右侧进入 */
  animation-name: danmaku-move; /* 使用统一的弹幕横向位移动画 */
  animation-timing-function: linear; /* 匀速移动，贴近真实弹幕效果 */
  animation-iteration-count: 1; /* 每条弹幕只播放一次 */
  animation-fill-mode: forwards; /* 动画结束后保持在终点位置，避免闪回起点 */
  transition: background 0.3s, border 0.3s, box-shadow 0.3s; /* 状态切换时的过渡效果 */
}

/** 弹幕横向位移动画：从右向左平移，确保位移距离涵盖“屏幕宽度+自身宽度” */
@keyframes danmaku-move {
  0% {
    transform: translateX(0);
  }
  100% {
    /** 位移总量 = 自身宽度(100%) + 屏幕宽度(100vw)，保证无论长短都能刚好完全飞出屏幕 */
    transform: translateX(calc(-100% - 100vw));
  }
}

.content-text {
  font-size: 34rpx; /* 祈福正文的主要阅读字号 */
  line-height: 1.2; /* 行高与字号相同，减少向下视觉偏移 */
  color: #ffffff; 
}

.create-button {
  position: fixed; /* 悬浮在页面右下角，不随内容滚动 */
  right: 40rpx; /* 距离右边缘的固定间距 */
  bottom: 60rpx; /* 距离底部的固定间距，避开系统手势区域 */
  width: 176rpx; /* 按钮固定宽度 */
  height: 80rpx; /* 按钮固定高度 */
  border-radius: 999rpx; /* 圆角胶囊形状，符合主按钮气质 */
  background: linear-gradient(135deg, #b91c1c, #f97316); /* 红橙渐变背景，突出主要行动按钮 */
  box-shadow: 0 20rpx 40rpx rgba(15, 23, 42, 0.6); /* 向上投影，营造悬浮感 */
  display: flex; /* 按钮内部使用弹性布局 */
  align-items: center; /* 垂直居中文本 */
  justify-content: center; /* 水平居中文本 */
  color: #ffffff; /* 按钮文字为近白色，与渐变背景形成对比 */
  z-index: 900; /* 确保按钮在普通弹幕之上，但在遮罩之下 */
}

/* ================== 新增交互样式 ================== */

/* 遮罩层 */
.mask {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.6);
  z-index: 1000;
  backdrop-filter: blur(2px);
  animation: fadeIn 0.2s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* 暂停时，原弹幕卡片隐藏（视觉上被详情弹窗取代） */
.danmaku-card.hidden-target {
  opacity: 0; /* 保持占位，但不可见 */
  animation-play-state: paused !important; /* 同时暂停它的位置移动 */
}

/* 详情弹窗容器 */
.detail-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2000; /* 高于遮罩层 */
  width: 80vw;
  max-width: 80vw;
  min-width: 300rpx;
}

/* 详情卡片样式 */
.detail-card {
  background: rgba(30, 10, 10, 0.95);
  border: 1px solid rgba(254, 215, 170, 0.3);
  box-shadow: 0 0 40rpx rgba(0, 0, 0, 0.8);
  white-space: normal; /* 允许文字换行 */
  padding: 32rpx;
  animation: popIn 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}

@keyframes popIn {
  0% { opacity: 0; transform: scale(0.9); }
  100% { opacity: 1; transform: scale(1); }
}

/* 详细信息区域 */
.detail-info {
  margin-top: 20rpx;
  padding-top: 20rpx;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-direction: column;
  gap: 12rpx;
  animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-10rpx); }
  to { opacity: 1; transform: translateY(0); }
}

.detail-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 24rpx;
}

.user-nick {
  font-weight: bold;
  color: #fed7aa; /* 金色昵称 */
  font-size: 26rpx;
}

.detail-type {
  padding: 4rpx 12rpx;
  border-radius: 8rpx;
  background: rgba(255, 255, 255, 0.15);
  font-size: 20rpx;
  color: #fff;
}

.detail-time {
  color: rgba(255, 255, 255, 0.5);
  font-size: 22rpx;
}

.action-row {
  /* margin-top: 10rpx; 移除之前的顶部间距，因为现在在同一行了 */
  display: flex;
  /* justify-content: flex-end; 移除右对齐，因为 detail-row 已经是 space-between */
}

.like-btn {
  background: rgba(244, 63, 94, 0.2); /* 红色背景 */
  padding: 8rpx 24rpx;
  border-radius: 30rpx;
  font-size: 24rpx;
  color: #fda4af;
  border: 1px solid rgba(244, 63, 94, 0.3);
  display: flex;
  align-items: center;
}
